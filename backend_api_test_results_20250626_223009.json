{
  "test_session": {
    "timestamp": "2025-06-26T22:30:09.437298",
    "total_tests": 12,
    "successful_tests": 8,
    "failed_tests": 4,
    "success_rate": "66.7%"
  },
  "endpoint_analysis": {
    "working_count": 8,
    "broken_count": 4,
    "missing_count": 2
  },
  "detailed_results": [
    {
      "endpoint_name": "Cliniko Connection Test",
      "url": "https://routiq-backend-prod.up.railway.app/api/v1/cliniko/test-connection/org_2xwHiNrj68eaRUlX10anlXGvzX7",
      "method": "GET",
      "timestamp": "2025-06-26T22:29:02.680195",
      "success": true,
      "status_code": 200,
      "response_data": {
        "success": true,
        "message": "Cliniko API connection successful",
        "organization_id": "org_2xwHiNrj68eaRUlX10anlXGvzX7",
        "api_url": "https://api.au4.cliniko.com/v1",
        "practitioners_count": 1,
        "total_patients_available": 648,
        "sample_patients_available": true,
        "sample_patients_count": 1
      },
      "error": null,
      "response_time_ms": 1350.02
    },
    {
      "endpoint_name": "Active Patients Summary",
      "url": "https://routiq-backend-prod.up.railway.app/api/v1/cliniko/active-patients-summary/org_2xwHiNrj68eaRUlX10anlXGvzX7",
      "method": "GET",
      "timestamp": "2025-06-26T22:29:04.030487",
      "success": true,
      "status_code": 200,
      "response_data": {
        "total_active_patients": 648,
        "avg_recent_appointments": 0,
        "avg_upcoming_appointments": 0,
        "avg_total_appointments": 0,
        "organization_id": "org_2xwHiNrj68eaRUlX10anlXGvzX7",
        "timestamp": "2025-06-26T14:29:04.498428"
      },
      "error": null,
      "response_time_ms": 463.52
    },
    {
      "endpoint_name": "Sync Dashboard Data",
      "url": "https://routiq-backend-prod.up.railway.app/api/v1/cliniko/sync/dashboard/org_2xwHiNrj68eaRUlX10anlXGvzX7",
      "method": "GET",
      "timestamp": "2025-06-26T22:29:04.494168",
      "success": true,
      "status_code": 200,
      "response_data": {
        "organization_id": "org_2xwHiNrj68eaRUlX10anlXGvzX7",
        "credentials": {
          "service_config": {
            "region": "au4",
            "api_url": "https://api.au4.cliniko.com/v1",
            "features": [
              "patients",
              "appointments",
              "invoices"
            ],
            "description": "Primary practice management system for patient bookings and medical records",
            "sync_schedule": "*/30 * * * *"
          },
          "is_active": true,
          "sync_enabled": true,
          "last_sync_at": "2025-06-26T14:22:16.123931+00:00"
        },
        "data_summary": {
          "total_patients": 648,
          "cliniko_linked": 648,
          "link_percentage": 100.0
        },
        "active_patients": {
          "total_active": 648,
          "avg_recent_appointments": 0,
          "avg_upcoming_appointments": 0
        },
        "sync_history": [
          {
            "status": "completed",
            "started_at": "2025-06-26T14:21:03.262088+00:00",
            "completed_at": "2025-06-26T14:22:16.404570+00:00",
            "records_processed": 648,
            "records_success": 648,
            "records_failed": 0
          },
          {
            "status": "running",
            "started_at": "2025-06-26T09:13:13.266273+00:00",
            "completed_at": null,
            "records_processed": 0,
            "records_success": 0,
            "records_failed": 0
          },
          {
            "status": "failed",
            "started_at": "2025-06-26T06:59:58.918634+00:00",
            "completed_at": "2025-06-26T09:02:08.283145+00:00",
            "records_processed": 0,
            "records_success": 0,
            "records_failed": 0
          },
          {
            "status": "failed",
            "started_at": "2025-06-26T06:53:09.188608+00:00",
            "completed_at": "2025-06-26T09:02:08.283145+00:00",
            "records_processed": 0,
            "records_success": 0,
            "records_failed": 0
          },
          {
            "status": "failed",
            "started_at": "2025-06-26T06:50:17.474557+00:00",
            "completed_at": "2025-06-26T09:02:08.283145+00:00",
            "records_processed": 0,
            "records_success": 0,
            "records_failed": 0
          },
          {
            "status": "failed",
            "started_at": "2025-06-26T06:47:34.410949+00:00",
            "completed_at": "2025-06-26T09:02:08.283145+00:00",
            "records_processed": 0,
            "records_success": 0,
            "records_failed": 0
          },
          {
            "status": "failed",
            "started_at": "2025-06-26T06:46:14.541524+00:00",
            "completed_at": "2025-06-26T09:02:08.283145+00:00",
            "records_processed": 0,
            "records_success": 0,
            "records_failed": 0
          },
          {
            "status": "failed",
            "started_at": "2025-06-26T06:42:58.088315+00:00",
            "completed_at": "2025-06-26T09:02:08.283145+00:00",
            "records_processed": 0,
            "records_success": 0,
            "records_failed": 0
          },
          {
            "status": "failed",
            "started_at": "2025-06-26T06:41:40.637748+00:00",
            "completed_at": "2025-06-26T09:02:08.283145+00:00",
            "records_processed": 0,
            "records_success": 0,
            "records_failed": 0
          },
          {
            "status": "failed",
            "started_at": "2025-06-26T06:39:49.502378+00:00",
            "completed_at": "2025-06-26T09:02:08.283145+00:00",
            "records_processed": 0,
            "records_success": 0,
            "records_failed": 0
          }
        ],
        "health_check": {
          "has_credentials": true,
          "credentials_valid": true,
          "has_patients": true,
          "has_active_patients": true,
          "high_link_rate": true
        },
        "timestamp": "2025-06-26T14:29:05.707957"
      },
      "error": null,
      "response_time_ms": 2257.11
    },
    {
      "endpoint_name": "Sync History/Logs",
      "url": "https://routiq-backend-prod.up.railway.app/api/v1/cliniko/sync-logs/org_2xwHiNrj68eaRUlX10anlXGvzX7?limit=5",
      "method": "GET",
      "timestamp": "2025-06-26T22:29:06.751639",
      "success": true,
      "status_code": 200,
      "response_data": {
        "organization_id": "org_2xwHiNrj68eaRUlX10anlXGvzX7",
        "logs": [
          {
            "id": "ee249998-b6ab-41c9-ad82-509dfa466d93",
            "source_system": "cliniko",
            "operation_type": "full_patients",
            "status": "completed",
            "records_processed": 648,
            "records_success": 648,
            "records_failed": 0,
            "error_details": {},
            "started_at": "2025-06-26T14:21:03.262088Z",
            "completed_at": "2025-06-26T14:22:16.404570Z",
            "metadata": {
              "step": "completed",
              "sync_type": "full_patients",
              "timestamp": "2025-06-26T14:22:16.375365+00:00",
              "success_rate": 100.0,
              "patients_found": 648,
              "patients_stored": 648,
              "patients_deleted": 0,
              "progress_percent": 100.0
            },
            "organization_id": "org_2xwHiNrj68eaRUlX10anlXGvzX7",
            "updated_at": "2025-06-26T14:22:16.404570Z"
          },
          {
            "id": "bfdb0ef9-bd24-4fe9-96a4-a5c717f270b8",
            "source_system": "cliniko",
            "operation_type": "full_patients",
            "status": "running",
            "records_processed": 0,
            "records_success": 0,
            "records_failed": 0,
            "error_details": {},
            "started_at": "2025-06-26T09:13:13.266273Z",
            "completed_at": null,
            "metadata": {
              "step": "initializing",
              "sync_type": "full_patients"
            },
            "organization_id": "org_2xwHiNrj68eaRUlX10anlXGvzX7",
            "updated_at": "2025-06-26T09:14:40.318026Z"
          },
          {
            "id": "ba3f3902-af94-4b35-8d6c-4801df7fbfc7",
            "source_system": "cliniko",
            "operation_type": "full_patients",
            "status": "failed",
            "records_processed": 0,
            "records_success": 0,
            "records_failed": 0,
            "error_details": {
              "error": "Manually failed due to stuck state - fixed to use patients table"
            },
            "started_at": "2025-06-26T06:59:58.918634Z",
            "completed_at": "2025-06-26T09:02:08.283145Z",
            "metadata": {
              "step": "initializing",
              "sync_type": "full_patients"
            },
            "organization_id": "org_2xwHiNrj68eaRUlX10anlXGvzX7",
            "updated_at": "2025-06-26T09:14:40.318026Z"
          },
          {
            "id": "c616ba77-693a-4ae2-b0fb-5eb0dd0441ce",
            "source_system": "cliniko",
            "operation_type": "full_patients",
            "status": "failed",
            "records_processed": 0,
            "records_success": 0,
            "records_failed": 0,
            "error_details": {
              "error": "Manually failed due to stuck state - fixed to use patients table"
            },
            "started_at": "2025-06-26T06:53:09.188608Z",
            "completed_at": "2025-06-26T09:02:08.283145Z",
            "metadata": {
              "step": "initializing",
              "sync_type": "full_patients"
            },
            "organization_id": "org_2xwHiNrj68eaRUlX10anlXGvzX7",
            "updated_at": "2025-06-26T09:14:40.318026Z"
          },
          {
            "id": "d9def376-a3c1-44ae-b7a5-1e1796ff5014",
            "source_system": "cliniko",
            "operation_type": "full_patients",
            "status": "failed",
            "records_processed": 0,
            "records_success": 0,
            "records_failed": 0,
            "error_details": {
              "error": "Manually failed due to stuck state - fixed to use patients table"
            },
            "started_at": "2025-06-26T06:50:17.474557Z",
            "completed_at": "2025-06-26T09:02:08.283145Z",
            "metadata": {
              "step": "initializing",
              "sync_type": "full_patients"
            },
            "organization_id": "org_2xwHiNrj68eaRUlX10anlXGvzX7",
            "updated_at": "2025-06-26T09:14:40.318026Z"
          }
        ],
        "total_logs": 5,
        "source_system": "cliniko"
      },
      "error": null,
      "response_time_ms": 462.65
    },
    {
      "endpoint_name": "Organization Services",
      "url": "https://routiq-backend-prod.up.railway.app/api/v1/admin/organization-services/org_2xwHiNrj68eaRUlX10anlXGvzX7",
      "method": "GET",
      "timestamp": "2025-06-26T22:29:07.214724",
      "success": true,
      "status_code": 200,
      "response_data": {
        "organization_id": "org_2xwHiNrj68eaRUlX10anlXGvzX7",
        "services": [
          {
            "id": "ed3be421-ae25-4001-a282-b1f8c32ef483",
            "organization_id": "org_2xwHiNrj68eaRUlX10anlXGvzX7",
            "service_name": "cliniko",
            "service_config": {
              "region": "au4",
              "api_url": "https://api.au4.cliniko.com/v1",
              "features": [
                "patients",
                "appointments",
                "invoices"
              ],
              "description": "Primary practice management system for patient bookings and medical records",
              "sync_schedule": "*/30 * * * *"
            },
            "is_primary": true,
            "is_active": true,
            "sync_enabled": true,
            "last_sync_at": "2025-06-26T14:22:16.123931Z",
            "created_at": "2025-06-09T08:02:09.231606Z",
            "organization_name": "Surf Rehab"
          }
        ],
        "total_services": 1,
        "active_services": 1,
        "primary_service": {
          "id": "ed3be421-ae25-4001-a282-b1f8c32ef483",
          "organization_id": "org_2xwHiNrj68eaRUlX10anlXGvzX7",
          "service_name": "cliniko",
          "service_config": {
            "region": "au4",
            "api_url": "https://api.au4.cliniko.com/v1",
            "features": [
              "patients",
              "appointments",
              "invoices"
            ],
            "description": "Primary practice management system for patient bookings and medical records",
            "sync_schedule": "*/30 * * * *"
          },
          "is_primary": true,
          "is_active": true,
          "sync_enabled": true,
          "last_sync_at": "2025-06-26T14:22:16.123931Z",
          "created_at": "2025-06-09T08:02:09.231606Z",
          "organization_name": "Surf Rehab"
        },
        "available_integrations": [
          "cliniko"
        ]
      },
      "error": null,
      "response_time_ms": 487.54
    },
    {
      "endpoint_name": "Cliniko Status",
      "url": "https://routiq-backend-prod.up.railway.app/api/v1/cliniko/status/org_2xwHiNrj68eaRUlX10anlXGvzX7",
      "method": "GET",
      "timestamp": "2025-06-26T22:29:07.702487",
      "success": true,
      "status_code": 200,
      "response_data": {
        "organization_id": "org_2xwHiNrj68eaRUlX10anlXGvzX7",
        "last_sync_time": "2025-06-26T14:22:14.880410Z",
        "total_patients": 648,
        "active_patients": 648,
        "synced_patients": 648,
        "sync_percentage": 100.0,
        "status": "connected"
      },
      "error": null,
      "response_time_ms": 725.77
    },
    {
      "endpoint_name": "Start Active Sync",
      "url": "https://routiq-backend-prod.up.railway.app/api/v1/cliniko/sync/org_2xwHiNrj68eaRUlX10anlXGvzX7",
      "method": "POST",
      "timestamp": "2025-06-26T22:29:08.429548",
      "success": true,
      "status_code": 200,
      "response_data": {
        "success": true,
        "message": "Cliniko ALL patients sync started successfully",
        "organization_id": "org_2xwHiNrj68eaRUlX10anlXGvzX7",
        "result": null,
        "timestamp": "2025-06-26T14:29:08.721730"
      },
      "error": null,
      "response_time_ms": 196.59
    },
    {
      "endpoint_name": "Sync Status by ID (MISSING)",
      "url": "https://routiq-backend-prod.up.railway.app/api/v1/sync/status/test_sync_id",
      "method": "GET",
      "timestamp": "2025-06-26T22:29:08.626427",
      "success": false,
      "status_code": 404,
      "response_data": null,
      "error": "{\"detail\":\"Not Found\"}",
      "response_time_ms": 183.71
    },
    {
      "endpoint_name": "Sync Status Monitoring (MISSING)",
      "url": "https://routiq-backend-prod.up.railway.app/api/v1/sync/status/monitoring",
      "method": "GET",
      "timestamp": "2025-06-26T22:29:08.810349",
      "success": false,
      "status_code": 404,
      "response_data": null,
      "error": "{\"detail\":\"Not Found\"}",
      "response_time_ms": 179.79
    },
    {
      "endpoint_name": "Organization Sync Status (MISSING)",
      "url": "https://routiq-backend-prod.up.railway.app/api/v1/sync/status/organization/org_2xwHiNrj68eaRUlX10anlXGvzX7",
      "method": "GET",
      "timestamp": "2025-06-26T22:29:08.990329",
      "success": false,
      "status_code": null,
      "response_data": null,
      "error": "Request timeout",
      "response_time_ms": null
    },
    {
      "endpoint_name": "Cliniko Sync All (Alternative)",
      "url": "https://routiq-backend-prod.up.railway.app/api/v1/cliniko/sync-all/org_2xwHiNrj68eaRUlX10anlXGvzX7",
      "method": "POST",
      "timestamp": "2025-06-26T22:29:39.105728",
      "success": true,
      "status_code": 200,
      "response_data": {
        "success": true,
        "message": "Cliniko FULL sync started successfully - all patients will be updated",
        "organization_id": "org_2xwHiNrj68eaRUlX10anlXGvzX7",
        "result": null,
        "timestamp": "2025-06-26T14:29:39.417770"
      },
      "error": null,
      "response_time_ms": 210.47
    },
    {
      "endpoint_name": "Health Check",
      "url": "https://routiq-backend-prod.up.railway.app/health",
      "method": "GET",
      "timestamp": "2025-06-26T22:29:39.316557",
      "success": false,
      "status_code": null,
      "response_data": null,
      "error": "Request timeout",
      "response_time_ms": null
    }
  ],
  "working_endpoints": [
    "Cliniko Connection Test",
    "Active Patients Summary",
    "Sync Dashboard Data",
    "Sync History/Logs",
    "Organization Services",
    "Cliniko Status",
    "Start Active Sync",
    "Cliniko Sync All (Alternative)"
  ],
  "broken_endpoints": [
    "Sync Status by ID (MISSING)",
    "Sync Status Monitoring (MISSING)",
    "Organization Sync Status (MISSING)",
    "Health Check"
  ],
  "missing_endpoints": [
    "Sync Status by ID (MISSING)",
    "Sync Status Monitoring (MISSING)"
  ]
}